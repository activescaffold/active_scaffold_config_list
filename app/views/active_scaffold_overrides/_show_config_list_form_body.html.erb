<%= as_element :fields_container, class: 'form' do %>
  <% if config_list_columns? %>
    <%= as_element :form_element, class: 'form-element' do %>
      <%
        content = active_scaffold_checkbox_list(
          nil,
          config_list_columns,
          config_list_params || config_list_columns.map(&:last),
          {
            name: 'config_list',
            id: "#{element_form_id(action: :config_list)}-columns",
            class: ('sortable-container' unless active_scaffold_config.config_list.draggable)
          },
          ui_options: {draggable_lists: active_scaffold_config.config_list.draggable, item_options: {class: 'sortable'}}
        )
      %>
      <%= form_attribute_html(nil, as_(:columns), content, nil, {}) %>
    <% end %>
  <% end %>

  <% if config_list_sorting? %>
    <%= as_element :form_element, class: 'form-element' do %>
      <% content = capture do %>
        <ol>
          <%
            columns_options = list_columns.select(&:sortable?).map { |c| [c.label, c.name] }
            order_options = ['asc', 'desc'].map { |v| [as_(v), v] }
            selected = config_list_sorting || []
            3.times do |i|
          %>
            <li><%= select_tag "config_list_sorting[#{i}][]", options_for_select(columns_options, selected: selected[i]&.first), include_blank: as_(:_select_), class: 'column' %>
              <%= select_tag "config_list_sorting[#{i}][]", options_for_select(order_options, selected: selected[i]&.last), include_blank: as_(:_select_), class: 'order' %></li>
          <% end %>
        </ol>
      <% end %>
      <%= form_attribute_html(nil, as_(:default_sorting), content, nil, {}) %>
    <% end %>
  <% end %>
<% end %>
